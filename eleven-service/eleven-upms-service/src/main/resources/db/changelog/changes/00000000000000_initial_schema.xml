<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <changeSet author="wangzc (generated)" id="1727938393362-1">
        <createTable tableName="upms_access_token">
            <column name="token" type="VARCHAR(60)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="upms_access_token_pkey"/>
            </column>
            <column name="create_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="expire_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="client_ip" type="VARCHAR(50)"/>
            <column name="issuer" type="VARCHAR(200)"/>
            <column name="principal_name" type="VARCHAR(100)"/>
            <column name="principal_type" type="VARCHAR(100)"/>
        </createTable>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-2">
        <createTable tableName="upms_authority">
            <column name="id" type="VARCHAR(100)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="upms_authority_pkey"/>
            </column>
            <column name="owner_name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="owner_type" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="power_type" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="power_name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="create_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="create_by" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="update_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="update_by" type="VARCHAR(100)"/>
        </createTable>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-3">
        <createTable tableName="upms_user">
            <column name="id" type="VARCHAR(50)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="upms_user_pkey"/>
            </column>
            <column name="username" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="login_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="state" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="is_locked" type="BOOLEAN"/>
            <column name="type" type="VARCHAR(50)"/>
            <column name="register_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="create_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="create_by" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="update_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="update_by" type="VARCHAR(100)"/>
            <column name="delete_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
        </createTable>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-4">
        <createTable tableName="upms_role">
            <column name="id" type="VARCHAR(100)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="upms_role_pkey"/>
            </column>
            <column name="code" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="create_at" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false"/>
            </column>
            <column name="create_by" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="update_at" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="update_by" type="VARCHAR(100)"/>
        </createTable>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-5">
        <createIndex indexName="upms_access_token_principal_name_principal_type_index" tableName="upms_access_token">
            <column name="principal_name"/>
            <column name="principal_type"/>
        </createIndex>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-6">
        <createIndex indexName="idx_upms_authority_01" tableName="upms_authority">
            <column name="owner_type"/>
            <column name="owner_name"/>
        </createIndex>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-7">
        <createIndex indexName="idx_upms_authority_02" tableName="upms_authority">
            <column name="power_type"/>
            <column name="power_name"/>
        </createIndex>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-8">
        <createIndex indexName="idx_upms_user_delete_at" tableName="upms_user">
            <column name="delete_at"/>
        </createIndex>
    </changeSet>
    <changeSet author="wangzc (generated)" id="1727938393362-9">
        <addUniqueConstraint columnNames="code" constraintName="code" tableName="upms_role"/>
    </changeSet>

</databaseChangeLog>
